
Empty = { }, 
VarEmpty = { val: Empty }, 
VarInt = { val: int },
Cell = { get:void -> Empty, set:Empty -> void }

cxt:void

------------------------------------------------------

let v = new {a:VarEmpty;} in
new {z:Cell; get:\x.v.val, set:\y.if y=null then (while 1 do skip) else (v.val := y)}

  =?=

let b = new {c:VarInt;} in 
let v = new {a:VarEmpty;} in 
let w = new {d:VarEmpty;} in 
new {z:Cell; 
  get:\x.if b.val = 1 then (b.val := 0; v.val) else (b.val := 1; w.val), 
  set:\y.if y=null then (while 1 do skip) else (v.val := y; w.val := y)
}
  
